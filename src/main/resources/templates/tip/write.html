<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>技巧编辑</title>
<link rel="stylesheet" type="text/css" media="all"
	th:href="@{/custom/common/css/common.css}" />
<link rel="stylesheet" type="text/css" media="all"
	href="/plugin/bootstrap/bootstrap.min.css"
	th:href="@{/plugin/bootstrap/bootstrap.min.css}" />
<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
                        

<script th:src="@{/plugin/jquery/jquery.min.js}"></script>
<script th:src="@{/plugin/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/plugin/editor/wangEditor.min.js}"></script>
<script th:src="@{/plugin/upload/ajaxfileupload.js}"></script>


<script type="text/javascript">
	$(function() {
		
		$(".img-big-upload").click(function(){
			var fileInput = $("#aa");
			// 模拟点击input
			fileInput.trigger('click');
			fileInput.change(function() {
				$(".img-thumbnail").removeClass("hide");
				$(".img-thumbnail").attr("src","");
			});
		});
			
		
		
		
		
		
		
		
		
		
		
		var E = window.wangEditor
		var editor = new E('#div1', '#div2'); // 两个参数也可以传入 elem 对象，class 选择器
		editor.customConfig.uploadFileName = 'file';
		editor.customConfig.uploadImgServer = '/api/img/upload/head';
		editor.create();

		$('button[data="clear"]').click(function() {
			editor.txt.clear();
		});

		$('button[data="add"]').click(function() {
			editor.txt.html('<p>初始化内容</p>');
		});

		$('button[data="getTxt"]').click(function() {
			alert(editor.txt.text());
		});

		$('button[data="getHtml"]').click(function() {
			alert(editor.txt.html());
		});

		$('button[data="getJson"]').click(function() {
			alert(JSON.stringify(editor.txt.getJSON()));
		});

	});
</script>


<style type="text/css">
.toolbar {
	border: 1px solid #ccc;
}

.text {
	border: 1px solid #ccc;
	height: 400px;
}
.img-big-upload{
width: 600px;
height: 200px;
border: 1px dashed #e5e5e5;
cursor: pointer;
}
.img-big-upload i{
font-size: 60px;
margin: 70px 0px 0 270px;
color: #f0f0f0;
}
</style>
</head>
<body>
	<div class="container" style="margin-top: 200px">
		<div class="row">
			<div class="col-md-12">
				<form class="form-horizontal" action="" role="form">
					<div class="form-group">
						<label for="firstname" class="col-sm-1 control-label">题图</label>
						<div class="col-sm-11">
							<div class="show img-big-upload">
								<i class="fa fa-image fa-5x"></i>
							</div>
							<div class="hide">
								<input id="aa" class="hide" type="file" name="file"/>
								<img class="img-thumbnail" alt="" src="" />
							</div>
						</div>
					</div>
				
					<div class="form-group">
						<label for="firstname" class="col-sm-1 control-label">标题</label>
						<div class="col-sm-11">
							<input type="text" class="form-control" id="firstname"
								placeholder="请输入标题">
						</div>
					</div>
			


				</form>



				<div>
					<form>
						<p>
							上传图片: &nbsp;&nbsp; <input type="file" name="file" id="fupPhoto" />
							<input onclick="imgUpload()" type="button" value="上传" />
						</p>
					</form>
				</div>

				<div>
					<p>
						回传路径: &nbsp;&nbsp; <input style="width: 800" type="test"
							id="returnUrl" /> <br />
					</p>
					<img height="150" width="200" id="showImg" />
				</div>





				<button data="getTxt" type="button" class="btn">获取纯文本</button>
				<button data="getHtml" type="button" class="btn">获取带格式文本</button>
				<button data="getJson" type="button" class="btn">获取Json格式文本</button>
				<button data="add" type="button" class="btn">替换内容</button>
				<button data="clear" type="button" class="btn">清空内容</button>
				<button data="add" type="button" class="btn">替换内容</button>
				<div id="div1" class="toolbar"></div>
				<div style="padding: 5px 0; color: #ccc">
					<hr />
				</div>
				<div id="div2" class="text">
					<!--可使用 min-height 实现编辑区域自动增加高度-->
					<p>请输入内容</p>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		//图片上传示例
		function imgUpload() {
			$.ajaxFileUpload({
				url : /*[[@{/api/img/upload/head}]]*/"url",
				secureuri : false,
				dataType : 'json',
				fileElementId : 'fupPhoto',
				success : function(data) {
					if (data.result == true) {
						var imgUrl = data.data;
						alert("图片上传成功");
						$("#returnUrl").val(imgUrl);
					} else {
						alert("上传失败");
					}
				}
			});
		}
		/*]]>*/
	</script>
</body>
</html>